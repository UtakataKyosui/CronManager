# Cron Manager

LinuxとmacOSのためのCron管理TUI（Terminal User Interface）アプリケーション。Crontabエントリを視覚的に管理し、簡単に追加・編集・削除できます。

## 特徴

- **表形式UI**: 名前、スケジュール、コマンドを見やすい表形式で表示
- **簡単な編集**: キーボードショートカットで直感的に操作
- **有効/無効の切り替え**: エントリを削除せずに一時的に無効化可能
- **安全な管理**: 実際のcrontabを直接編集せず、ローカルファイルで管理（オプションでシステムcrontabも使用可能）
- **名前付き管理**: 各Cronエントリに分かりやすい名前を付けて管理

## インストール

### 前提条件

- Rust（1.70以上）

### ビルド

```bash
# リポジトリのクローン
git clone <repository-url>
cd CronManager

# リリースビルド
cargo build --release

# バイナリは target/release/cron-manager に生成されます
```

### インストール（オプション）

```bash
# システムにインストール
cargo install --path .
```

## 使い方

### 基本的な起動

```bash
# ローカルファイルモード（~/.cron-manager-crontab を使用）
cargo run

# または、ビルド済みバイナリを使用
./target/release/cron-manager
```

### システムcrontabモード

実際のシステムcrontabを編集する場合：

```bash
# システムcrontabを使用（注意: 実際のcrontabが変更されます）
./target/release/cron-manager --system
```

## 操作方法

### ナビゲーション

- `↑` / `k`: 上に移動
- `↓` / `j`: 下に移動

### エントリの管理

- `a`: 新しいエントリを追加
  1. 名前を入力してEnter
  2. Cronスケジュール（例: `0 2 * * *`）を入力してEnter
  3. 実行コマンドを入力してEnter
- `d`: 選択中のエントリを削除
- `Space`: エントリの有効/無効を切り替え

### エントリの編集

- `n`: 選択中のエントリの名前を編集
- `s`: 選択中のエントリのスケジュールを編集
- `c`: 選択中のエントリのコマンドを編集

### その他

- `Enter`: 入力を確定
- `Esc`: 入力をキャンセル
- `q`: アプリケーションを終了

## Cronスケジュールの書式

Cronスケジュールは5つのフィールドからなります：

```
分 時 日 月 曜日
```

### 例

- `0 2 * * *`: 毎日午前2時
- `*/15 * * * *`: 15分ごと
- `0 9 * * 1-5`: 平日の午前9時
- `0 0 1 * *`: 毎月1日の午前0時
- `30 3 * * 0`: 毎週日曜日の午前3時30分

### フィールドの値

- **分**: 0-59
- **時**: 0-23
- **日**: 1-31
- **月**: 1-12
- **曜日**: 0-7（0と7は日曜日）

特殊文字：
- `*`: 全ての値
- `/`: 間隔（例: `*/5` = 5ごと）
- `-`: 範囲（例: `1-5` = 1から5まで）
- `,`: リスト（例: `1,3,5` = 1,3,5）

## ファイル形式

Cron Managerは、各エントリに名前を付けるために特別なコメント形式を使用します：

```bash
# NAME: Daily Backup
0 2 * * * /path/to/backup.sh

# NAME: Hourly Check
0 * * * * /path/to/check.sh

# 無効化されたエントリ（コメントアウト）
# NAME: Disabled Job
# 0 3 * * * /path/to/disabled.sh
```

## プロジェクト構造

```
CronManager/
├── src/
│   ├── main.rs           # エントリーポイント、イベントループ
│   ├── app.rs            # アプリケーション状態管理
│   ├── cron_entry.rs     # Cronエントリのデータ構造
│   ├── cron_parser.rs    # Crontab解析ロジック
│   ├── storage.rs        # ファイルI/O
│   └── ui.rs             # TUI描画ロジック
├── Cargo.toml            # 依存関係設定
└── README.md             # このファイル
```

## 技術スタック

- **Rust**: プログラミング言語
- **Ratatui**: TUIフレームワーク
- **Crossterm**: ターミナル操作
- **Cron**: Cron式の解析
- **Serde**: シリアライゼーション

## 今後の機能統合について

このアプリケーションはモジュール化された設計になっており、将来的に他のTUIと統合することを想定しています：

1. **モジュール化された構造**: 各機能が独立したモジュールとして実装
2. **Storage抽象化**: ファイルI/Oが`Storage`トレイトを通じて抽象化
3. **再利用可能なコンポーネント**: `CronEntry`や`CronParser`は他のプロジェクトでも使用可能

## ライセンス

MIT License

## 貢献

バグ報告や機能要望は、GitHubのIssueでお願いします。
